<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•œå¤´3çƒä½“è§†é¢‘å»¶è¿Ÿä¿®å¤éªŒè¯</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .test-button:hover {
            background: #45a049;
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #333;
            border-radius: 10px;
            overflow: hidden;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .log {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ é•œå¤´3çƒä½“è§†é¢‘å»¶è¿Ÿä¿®å¤éªŒè¯</h1>
        
        <div class="test-section">
            <h2>ğŸ¯ ä¿®å¤å†…å®¹</h2>
            <ul>
                <li>âœ… çƒä½“è§†é¢‘è®¾ç½®ä¸º <code>preload="auto"</code></li>
                <li>âœ… æ·»åŠ è§†é¢‘é¢„åŠ è½½ç³»ç»Ÿæ”¯æŒ</li>
                <li>âœ… è§†é¢‘å…ˆéšè—ï¼Œå‡†å¤‡å°±ç»ªåå†æ˜¾ç¤º</li>
                <li>âœ… ç™½çƒæ¶ˆå¤±ä¸è§†é¢‘æ˜¾ç¤ºåŒæ­¥</li>
                <li>âœ… è§†é¢‘æ’­æ”¾ç­‰å¾…æ˜¾ç¤ºå®Œæˆ</li>
                <li>âœ… å¢å¼ºçš„åŠ è½½çŠ¶æ€æç¤º</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>ğŸ® æµ‹è¯•æ§åˆ¶</h2>
            <button class="test-button" onclick="startTest()">å¼€å§‹æµ‹è¯•é•œå¤´3</button>
            <button class="test-button" onclick="skipToOrbs()">ç›´æ¥è·³è½¬åˆ°çƒä½“é˜¶æ®µ</button>
            <button class="test-button" onclick="reloadTest()">é‡æ–°åŠ è½½</button>
            <button class="test-button" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š æµ‹è¯•çŠ¶æ€</h2>
            <div class="status" id="status">å‡†å¤‡æµ‹è¯•...</div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¬ é•œå¤´3æµ‹è¯•</h2>
            <div class="iframe-container">
                <iframe id="scene3-frame" src="scene3-time-vortex.html"></iframe>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
            <div class="log" id="log"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ” è§‚å¯Ÿè¦ç‚¹</h2>
            <ul>
                <li><strong>çƒä½“å‡ºç°:</strong> ç™½è‰²å…‰çƒåº”è¯¥æµç•…æ”¾å¤§åˆ°240px</li>
                <li><strong>è§†é¢‘è¿‡æ¸¡:</strong> ç™½çƒæ¶ˆå¤±åï¼Œè§†é¢‘åº”è¯¥ç«‹å³æ˜¾ç¤ºï¼Œæ— å»¶è¿Ÿ</li>
                <li><strong>æ’­æ”¾å¼€å§‹:</strong> è§†é¢‘æ˜¾ç¤ºååº”è¯¥ç«‹å³å¼€å§‹æ’­æ”¾ï¼Œæ— é»‘å±</li>
                <li><strong>åŠ è½½æç¤º:</strong> å¦‚æœæœ‰å»¶è¿Ÿï¼Œåº”è¯¥æ˜¾ç¤ºåŠ è½½æç¤º</li>
                <li><strong>ç”¨æˆ·ä½“éªŒ:</strong> æ•´ä¸ªè¿‡ç¨‹åº”è¯¥æ„Ÿè§‰æµç•…ï¼Œæ— å¡é¡¿</li>
            </ul>
        </div>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        const logDiv = document.getElementById('log');
        const iframe = document.getElementById('scene3-frame');
        
        function updateStatus(message) {
            statusDiv.textContent = message;
            addLog(`çŠ¶æ€: ${message}`);
        }
        
        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function startTest() {
            updateStatus('å¼€å§‹æµ‹è¯•é•œå¤´3...');
            iframe.contentWindow.postMessage({ type: 'scene3-start' }, '*');
            addLog('å‘é€åœºæ™¯å¯åŠ¨ä¿¡å·');
        }
        
        function skipToOrbs() {
            updateStatus('è·³è½¬åˆ°çƒä½“é˜¶æ®µ...');
            iframe.contentWindow.postMessage({ type: 'skip-to-orbs' }, '*');
            addLog('è·³è½¬åˆ°çƒä½“æ¢ç´¢é˜¶æ®µ');
        }
        
        function reloadTest() {
            updateStatus('é‡æ–°åŠ è½½æµ‹è¯•...');
            iframe.src = iframe.src;
            addLog('é‡æ–°åŠ è½½iframe');
        }
        
        function clearLog() {
            logDiv.innerHTML = '';
            addLog('æ—¥å¿—å·²æ¸…ç©º');
        }
        
        // ç›‘å¬æ¥è‡ªiframeçš„æ¶ˆæ¯
        window.addEventListener('message', (event) => {
            if (event.data.type) {
                addLog(`æ”¶åˆ°æ¶ˆæ¯: ${event.data.type}`);
                
                switch(event.data.type) {
                    case 'scene3-phase-update':
                        updateStatus(`é˜¶æ®µ: ${event.data.phase}`);
                        break;
                    case 'orb-created':
                        addLog(`åˆ›å»ºçƒä½“: ${event.data.name}`);
                        break;
                    case 'video-loading':
                        addLog(`è§†é¢‘åŠ è½½: ${event.data.message}`);
                        break;
                    case 'video-ready':
                        addLog(`è§†é¢‘å‡†å¤‡: ${event.data.message}`);
                        break;
                    case 'video-playing':
                        addLog(`è§†é¢‘æ’­æ”¾: ${event.data.message}`);
                        break;
                }
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå‡†å¤‡æµ‹è¯•é•œå¤´3çƒä½“è§†é¢‘å»¶è¿Ÿä¿®å¤');
            addLog('æµ‹è¯•ç¯å¢ƒåˆå§‹åŒ–å®Œæˆ');
            
            // ç­‰å¾…iframeåŠ è½½
            iframe.addEventListener('load', () => {
                addLog('é•œå¤´3é¡µé¢åŠ è½½å®Œæˆ');
                updateStatus('é•œå¤´3å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
            });
        });
        
        // å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case '1':
                    startTest();
                    break;
                case '2':
                    skipToOrbs();
                    break;
                case 'r':
                case 'R':
                    reloadTest();
                    break;
                case 'c':
                case 'C':
                    clearLog();
                    break;
            }
        });
        
        addLog('å¿«æ·é”®: 1=å¼€å§‹æµ‹è¯•, 2=è·³è½¬çƒä½“, R=é‡è½½, C=æ¸…ç©ºæ—¥å¿—');
    </script>
</body>
</html> 