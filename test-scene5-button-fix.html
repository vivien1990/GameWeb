<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•œå¤´5æŒ‰é’®ä¿®å¤éªŒè¯</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            font-family: Arial, sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .fix-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 10px;
        }
        
        .section-title {
            color: #ffcc00;
            margin-bottom: 15px;
        }
        
        .fix-status {
            background: #2d5a2d;
            color: #90EE90;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .problem-solution {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .problem, .solution {
            padding: 15px;
            border-radius: 8px;
        }
        
        .problem {
            background: #5a2d2d;
            color: #ffaaaa;
        }
        
        .solution {
            background: #2d5a2d;
            color: #90EE90;
        }
        
        .code-sample {
            background: #333;
            color: #ccc;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        
        .control-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .control-button:hover {
            background: linear-gradient(45deg, #45a049, #4CAF50);
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #444;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="color: #ffcc00; text-align: center;">ğŸ”§ é•œå¤´5æŒ‰é’®é‡å¤é—®é¢˜ä¿®å¤</h1>
        <p style="text-align: center; color: #ccc;">éªŒè¯æŒ‰é’®é‡å¤å‡ºç°çš„ä¿®å¤å’Œæˆ˜æ–—èƒœåˆ©ç•Œé¢çš„æ·»åŠ </p>
        
        <!-- ä¿®å¤çŠ¶æ€æ€»è§ˆ -->
        <div class="fix-status">
            <h3>âœ… ä¿®å¤å®ŒæˆçŠ¶æ€</h3>
            <ul>
                <li>âœ… <strong>æŒ‰é’®é‡å¤é—®é¢˜</strong>ï¼šæ·»åŠ é‡å¤æ£€æŸ¥ï¼Œé˜²æ­¢æŒ‰é’®å¤šæ¬¡æ˜¾ç¤º</li>
                <li>âœ… <strong>äº‹ä»¶é‡å¤ç»‘å®š</strong>ï¼šæ·»åŠ ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢å¤šæ¬¡ç»‘å®šç‚¹å‡»äº‹ä»¶</li>
                <li>âœ… <strong>æˆ˜æ–—èƒœåˆ©ç•Œé¢</strong>ï¼šæ·»åŠ åä¸½çš„èƒœåˆ©æç¤ºç•Œé¢</li>
                <li>âœ… <strong>çŠ¶æ€é‡ç½®</strong>ï¼šæ”¹è¿›é‡å¯é€»è¾‘ï¼Œç¡®ä¿çŠ¶æ€æ­£ç¡®é‡ç½®</li>
            </ul>
        </div>
        
        <!-- é—®é¢˜1ï¼šæŒ‰é’®é‡å¤æ˜¾ç¤º -->
        <div class="fix-section">
            <h3 class="section-title">ğŸ”˜ é—®é¢˜1ï¼šæŒ‰é’®é‡å¤æ˜¾ç¤ºä¿®å¤</h3>
            
            <div class="problem-solution">
                <div class="problem">
                    <h4>âŒ ä¿®å¤å‰é—®é¢˜</h4>
                    <div class="code-sample">// æ—§ç‰ˆæ²¡æœ‰é‡å¤æ£€æŸ¥
showWhatHappenedButton() {
  this.actionButton.classList.remove('hidden');
  this.actionButton.classList.add('show');
  // å¯èƒ½å¤šæ¬¡è°ƒç”¨ï¼Œå¯¼è‡´æŒ‰é’®é‡å¤æ˜¾ç¤º
}</div>
                    <p>é—®é¢˜ï¼šæ²¡æœ‰æ£€æŸ¥æŒ‰é’®å½“å‰çŠ¶æ€ï¼Œå¯èƒ½é‡å¤æ˜¾ç¤º</p>
                </div>
                
                <div class="solution">
                    <h4>âœ… ä¿®å¤åæ–¹æ¡ˆ</h4>
                    <div class="code-sample">// æ–°ç‰ˆæ·»åŠ é‡å¤æ£€æŸ¥
showWhatHappenedButton() {
  // é˜²æ­¢é‡å¤æ˜¾ç¤º
  if (!this.actionButton.classList.contains('hidden')) return;
  
  this.actionButton.classList.remove('hidden');
  this.actionButton.classList.add('show');
  // ç«‹å³éšè—æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»
}</div>
                    <p>ç‰¹ç‚¹ï¼šæ£€æŸ¥å½“å‰çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æ˜¾ç¤ºå’Œç»‘å®š</p>
                </div>
            </div>
            
            <h4>ä¿®å¤è¦ç‚¹ï¼š</h4>
            <ul class="feature-list">
                <li>ğŸ›¡ï¸ <strong>é‡å¤æ£€æŸ¥</strong>ï¼šæ£€æŸ¥æŒ‰é’®hiddençŠ¶æ€ï¼Œé¿å…é‡å¤æ˜¾ç¤º</li>
                <li>âš¡ <strong>ç«‹å³éšè—</strong>ï¼šç‚¹å‡»åç«‹å³éšè—æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»</li>
                <li>ğŸ”’ <strong>äº‹ä»¶ä¿æŠ¤</strong>ï¼šæ·»åŠ choiceMadeçŠ¶æ€æ£€æŸ¥ï¼Œé˜²æ­¢é‡å¤é€‰æ‹©</li>
            </ul>
        </div>
        
        <!-- é—®é¢˜2ï¼šé€‰æ‹©æŒ‰é’®é‡å¤ -->
        <div class="fix-section">
            <h3 class="section-title">ğŸ¯ é—®é¢˜2ï¼šé€‰æ‹©æŒ‰é’®é‡å¤ä¿®å¤</h3>
            
            <div class="problem-solution">
                <div class="problem">
                    <h4>âŒ ä¿®å¤å‰é—®é¢˜</h4>
                    <div class="code-sample">// æ—§ç‰ˆæ²¡æœ‰ä¿æŠ¤æœºåˆ¶
showChoiceButtons() {
  this.choiceContainer.classList.add('show');
  // å¯èƒ½å¤šæ¬¡ç»‘å®šäº‹ä»¶
  choiceButtons.forEach(button => {
    button.onclick = () => this.makeChoice(choice);
  });
}</div>
                    <p>é—®é¢˜ï¼šæ²¡æœ‰çŠ¶æ€æ£€æŸ¥ï¼Œå¯èƒ½é‡å¤æ˜¾ç¤ºå’Œç»‘å®šäº‹ä»¶</p>
                </div>
                
                <div class="solution">
                    <h4>âœ… ä¿®å¤åæ–¹æ¡ˆ</h4>
                    <div class="code-sample">// æ–°ç‰ˆæ·»åŠ å¤šé‡ä¿æŠ¤
showChoiceButtons() {
  // é˜²æ­¢é‡å¤æ˜¾ç¤º
  if (this.choiceContainer.classList.contains('show')) return;
  
  choiceButtons.forEach(button => {
    button.onclick = () => {
      if (!this.choiceMade) {
        this.hideChoiceContainer(); // ç«‹å³éšè—
        this.makeChoice(choice);
      }
    };
  });
}</div>
                    <p>ç‰¹ç‚¹ï¼šå¤šé‡ä¿æŠ¤æœºåˆ¶ï¼Œç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡</p>
                </div>
            </div>
        </div>
        
        <!-- æ–°åŠŸèƒ½ï¼šæˆ˜æ–—èƒœåˆ©ç•Œé¢ -->
        <div class="fix-section">
            <h3 class="section-title">ğŸ† æ–°åŠŸèƒ½ï¼šæˆ˜æ–—èƒœåˆ©ç•Œé¢</h3>
            
            <div class="solution" style="grid-column: 1 / -1;">
                <h4>âœ¨ åä¸½çš„èƒœåˆ©ç•Œé¢</h4>
                <div class="code-sample">showVictoryMessage() {
  // åˆ›å»ºåä¸½çš„èƒœåˆ©ç•Œé¢
  const message = document.createElement('div');
  message.innerHTML = `
    âš”ï¸ æˆ˜æ–—èƒœåˆ©ï¼ âš”ï¸
    è‹±é›„æ•‘ç¾æˆåŠŸ
    
    ä½ å‹‡æ•¢åœ°æŒºèº«è€Œå‡ºï¼Œä¿æŠ¤äº†æ— è¾œçš„ç”·å­©
    è´µæ—å°‘å¹´åœ¨ä½ çš„å¨æ…‘ä¸‹è½è’è€Œé€ƒ
    æ­£ä¹‰å¾—åˆ°äº†ä¼¸å¼ ï¼Œå–„è‰¯å¾—åˆ°äº†å®ˆæŠ¤
    
    ğŸ† è·å¾—å±æ€§æå‡ï¼šæ­¦å¾· +5
    
    [ç»§ç»­å†’é™© â¡ï¸]
  `;
}</div>
            </div>
            
            <h4>èƒœåˆ©ç•Œé¢ç‰¹è‰²ï¼š</h4>
            <ul class="feature-list">
                <li>ğŸ¨ <strong>è§†è§‰è®¾è®¡</strong>ï¼šé‡‘è‰²è¾¹æ¡†ï¼Œæ¸å˜èƒŒæ™¯ï¼Œå‘å…‰æ•ˆæœ</li>
                <li>ğŸ“ <strong>æ•…äº‹å†…å®¹</strong>ï¼šè¯¦ç»†æè¿°æˆ˜æ–—è¿‡ç¨‹å’Œæ­£ä¹‰ä¸»é¢˜</li>
                <li>ğŸ† <strong>å±æ€§å¥–åŠ±</strong>ï¼šæ˜ç¡®æ˜¾ç¤ºæ­¦å¾·+5çš„å±æ€§æå‡</li>
                <li>âœ¨ <strong>åŠ¨ç”»æ•ˆæœ</strong>ï¼šæ¸æ˜¾åŠ¨ç”»ï¼Œè½»å¾®ç¼©æ”¾æ•ˆæœ</li>
                <li>ğŸ® <strong>äº¤äº’è®¾è®¡</strong>ï¼šç¾è§‚çš„ç»§ç»­æŒ‰é’®ï¼Œæ‚¬åœæ•ˆæœ</li>
            </ul>
        </div>
        
        <!-- æŠ€æœ¯ç»†èŠ‚ -->
        <div class="fix-section">
            <h3 class="section-title">âš™ï¸ æŠ€æœ¯å®ç°ç»†èŠ‚</h3>
            
            <h4>é˜²é‡å¤æœºåˆ¶ï¼š</h4>
            <div class="code-sample">// 1. æŒ‰é’®çŠ¶æ€æ£€æŸ¥
if (!this.actionButton.classList.contains('hidden')) return;

// 2. é€‰æ‹©å®¹å™¨çŠ¶æ€æ£€æŸ¥  
if (this.choiceContainer.classList.contains('show')) return;

// 3. é€‰æ‹©çŠ¶æ€ä¿æŠ¤
if (!this.choiceMade) { /* æ‰§è¡Œé€‰æ‹© */ }

// 4. ç«‹å³éšè—UI
this.hideActionButton();
this.hideChoiceContainer();</div>
            
            <h4>å®Œæ•´æµç¨‹æ§åˆ¶ï¼š</h4>
            <div class="code-sample">é˜¶æ®µ1è§†é¢‘ç»“æŸ â†’ showWhatHappenedButton() â†’ æ£€æŸ¥hiddençŠ¶æ€ â†’ æ˜¾ç¤ºæŒ‰é’®
ç‚¹å‡»æŒ‰é’® â†’ ç«‹å³éšè— â†’ startPhase2()
é˜¶æ®µ2è§†é¢‘ç»“æŸ â†’ showChoiceButtons() â†’ æ£€æŸ¥showçŠ¶æ€ â†’ æ˜¾ç¤ºé€‰æ‹©
ç‚¹å‡»é€‰æ‹© â†’ ç«‹å³éšè— â†’ makeChoice() â†’ æ£€æŸ¥choiceMade
æ’­æ”¾ç»“æœ â†’ éœ‡æ’¼è½¬åœº â†’ æœ€ç»ˆè§†é¢‘ â†’ showVictoryMessage()</div>
        </div>
        
        <!-- æµ‹è¯•é“¾æ¥ -->
        <div style="text-align: center; margin-top: 30px;">
            <button class="control-button" onclick="window.open('scene5-new.html', '_blank')">
                ğŸ¬ æµ‹è¯•é•œå¤´5ï¼ˆä¿®å¤ç‰ˆï¼‰
            </button>
            <button class="control-button" onclick="window.open('index-story.html', '_blank')">
                ğŸ­ æµ‹è¯•å®Œæ•´æ•…äº‹æµç¨‹
            </button>
            <button class="control-button" onclick="simulateVictory()">
                ğŸ† é¢„è§ˆæˆ˜æ–—èƒœåˆ©ç•Œé¢
            </button>
        </div>
    </div>
    
    <script>
        function simulateVictory() {
            // åˆ›å»ºæ¨¡æ‹Ÿçš„æˆ˜æ–—èƒœåˆ©ç•Œé¢
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(20, 40, 20, 0.95) 100%);
                color: #FFD700;
                padding: 50px;
                border-radius: 20px;
                border: 3px solid #FFD700;
                text-align: center;
                z-index: 99999;
                font-size: 18px;
                max-width: 600px;
                min-width: 500px;
                box-shadow: 
                    0 0 50px rgba(255, 215, 0, 0.5),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(15px);
                opacity: 0;
                animation: victoryFadeIn 0.8s ease-out forwards;
            `;
            
            message.innerHTML = `
                <div style="font-size: 36px; margin-bottom: 20px; color: #90EE90;">âš”ï¸ æˆ˜æ–—èƒœåˆ©ï¼ âš”ï¸</div>
                <div style="font-size: 24px; margin-bottom: 25px; color: #FFD700;">è‹±é›„æ•‘ç¾æˆåŠŸ</div>
                <div style="margin-bottom: 20px; color: #FFFFFF; line-height: 1.6;">
                    <p>ä½ å‹‡æ•¢åœ°æŒºèº«è€Œå‡ºï¼Œä¿æŠ¤äº†æ— è¾œçš„ç”·å­©</p>
                    <p>è´µæ—å°‘å¹´åœ¨ä½ çš„å¨æ…‘ä¸‹è½è’è€Œé€ƒ</p>
                    <p>æ­£ä¹‰å¾—åˆ°äº†ä¼¸å¼ ï¼Œå–„è‰¯å¾—åˆ°äº†å®ˆæŠ¤</p>
                </div>
                <div style="margin-bottom: 30px; color: #90EE90; font-size: 20px; font-weight: bold;">
                    ğŸ† è·å¾—å±æ€§æå‡ï¼šæ­¦å¾· +5
                </div>
                <button onclick="this.parentElement.remove()" 
                        style="padding: 15px 30px; background: linear-gradient(45deg, #FFD700, #FFA500); 
                               color: #000; border: none; border-radius: 12px; cursor: pointer; 
                               font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
                               transition: all 0.3s ease;">
                    ç»§ç»­å†’é™© â¡ï¸
                </button>
            `;
            
            document.body.appendChild(message);
        }
        
        // æ·»åŠ åŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes victoryFadeIn {
                0% {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.8);
                }
                60% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1.05);
                }
                100% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html> 